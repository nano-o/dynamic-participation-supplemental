<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory DynamicConsensus</title>
</head>


<body>
<div class="head">
<h1>Theory DynamicConsensus</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="DynamicConsensus.html"><span>DynamicConsensus</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../HOL/HOL/Main.html"><span>Main</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Lemmas about majorities</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="DynamicConsensus.majority_def|fact"><span class="entity_def" id="DynamicConsensus.majority_def|thm"><span class="entity_def" id="DynamicConsensus.majority_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DynamicConsensus.majority|const"><span>majority</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="antiquote"><span>}</span></span></span><span> is a strict majority among </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>majority</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>To make proofs simpler we assume that the set of processors is finite.
</span><span>We could rewrite the proofs using explicit finiteness assumptions when needed (e.g. the set of participants is always finite)</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_412..417">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.majorities_intersect|fact"><span class="entity_def" id="DynamicConsensus.majorities_intersect|thm"><span>majorities_intersect</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'p</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>― ‹</span><span>proof by contradiction</span><span>›</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_least|fact"><span>Un_least</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_412..417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_412..417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite_code|fact"><span>finite_code</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_less_mono|fact"><span>add_less_mono</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_412..417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_412..417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.distrib_left_numeral|fact"><span>distrib_left_numeral</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.semiring_numeral_class.mult_2|fact"><span>mult_2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_938..943">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.majority_anti|fact"><span class="entity_def" id="DynamicConsensus.majority_anti|thm"><span>majority_anti</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'p</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_eq|fact"><span>Diff_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_subset|fact"><span>Diff_subset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_greatest|fact"><span>Int_greatest</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_938..943"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_938..943"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Boolean_Algebras.html#Boolean_Algebras.boolean_algebra_class.compl_le_swap1|fact"><span>compl_le_swap1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite_code|fact"><span>finite_code</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Boolean_Algebras.html#Boolean_Algebras.boolean_algebra_class.inf_shunt|fact"><span>inf_shunt</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_le_less_trans|fact"><span>order_le_less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1238..1243">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.maj_increasing|fact"><span class="entity_def" id="DynamicConsensus.maj_increasing|thm"><span>maj_increasing</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'p</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_1238..1243"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_1238..1243"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1490..1495">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.card_maj_gt_card_not_maj|fact"><span class="entity_def" id="DynamicConsensus.card_maj_gt_card_not_maj|thm"><span>card_maj_gt_card_not_maj</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_1490..1495"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_1490..1495"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_1490..1495"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linorder_neqE_nat|fact"><span>linorder_neqE_nat</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Numeral_Simprocs.html#Numeral_Simprocs.nat_mult_less_cancel_disj|fact"><span>nat_mult_less_cancel_disj</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_subst1|fact"><span>order_less_subst1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Definition of a round of the No-Equivocation Model</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="DynamicConsensus.pre_round.C_def|fact"><span class="entity_def" id="DynamicConsensus.pre_round.C_def|thm"><span>locale</span></span></span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.pre_round|locale"><span>pre_round</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> 
    </span><span class="free"><span>P</span></span><span>  </span><span class="comment1"><span>― ‹</span><span>The participating set for the round</span><span>›</span></span><span>
    </span><span class="free"><span>F</span></span><span>  </span><span class="comment1"><span>― ‹</span><span>The faulty set</span><span>›</span></span><span>
    </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'p</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>The set of participating, non-faulty processors</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>HO</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>Maps each processor to the set of processors it hears of</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>bcast</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'m</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>bcast</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> means </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> broadcasts </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>rcvd</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'m</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> means </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> receives </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span> from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>q</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>lambda</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'m</span></span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>Failure indication</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>F</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="free"><span>lambda</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>λ</span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="DynamicConsensus.round.intro|fact"><span class="entity_def" id="DynamicConsensus.round_def|fact"><span class="entity_def" id="DynamicConsensus.round.intro|thm"><span class="entity_def" id="DynamicConsensus.round_def|thm"><span class="entity_def" id="DynamicConsensus.round_def|axiom"><span class="entity_def" id="offset_2390..2396">locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round|locale"><span class="entity_def" id="DynamicConsensus.round|const"><span class="entity_def" id="offset_2397..2402">round</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.pre_round|locale"><span>pre_round</span></a><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="DynamicConsensus.round.p2|fact"><span class="entity_def" id="DynamicConsensus.round.p2|thm"><span class="entity_def" id="offset_2431..2433">p2</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>majority correct</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p3|fact"><span class="entity_def" id="DynamicConsensus.round.p3|thm"><span class="entity_def" id="offset_2478..2480">p3</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="bound"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>rcvd</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>no equivocation</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p4|fact"><span class="entity_def" id="DynamicConsensus.round.p4|thm"><span class="entity_def" id="offset_2575..2577">p4</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="bound"><span>p</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>all participating, non-faulty processors are heard of</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p5|fact"><span class="entity_def" id="DynamicConsensus.round.p5|thm"><span class="entity_def" id="offset_2663..2665">p5</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>bcast</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>messages from participating, non-faulty processors are delivered intact</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p6|fact"><span class="entity_def" id="DynamicConsensus.round.p6|thm"><span class="entity_def" id="offset_2787..2789">p6</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>only participating processors are heard of</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p7|fact"><span class="entity_def" id="DynamicConsensus.round.p7|thm"><span class="entity_def" id="offset_2862..2864">p7</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bcast</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>participating, non-faulty processors do not broadcast </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="main"><span class="free"><span>λ</span></span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.p8|fact"><span class="entity_def" id="DynamicConsensus.round.p8|thm"><span class="entity_def" id="offset_2961..2963">p8</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="bound"><span>p'</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>if </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> receives a non-</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="main"><span class="free"><span>λ</span></span></span></span><span class="antiquote"><span>}</span></span></span><span> message form </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>q</span></span></span><span class="antiquote"><span>}</span></span></span><span>, then all hear from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>q</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Properties of the Gafni-Losa model</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3162..3167">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.maj_includes_correct|fact"><span class="entity_def" id="DynamicConsensus.round.maj_includes_correct|thm"><span class="entity_def" id="offset_3168..3188">maj_includes_correct</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>A majority among a heard-of set includes a correct processor</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>p</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>q</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2390..2396"><span>C_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_le_less_trans|fact"><span>order_le_less_trans</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2431..2433"><span>p2</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2575..2577"><span>p4</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2787..2789"><span>p6</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majorities_intersect|fact"><span>majorities_intersect</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3162..3167"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card.empty|fact"><span>card.empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ex_in_conv|fact"><span>ex_in_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_nat_zero_code|fact"><span>less_nat_zero_code</span></a><span>  </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.mult_0_right|fact"><span>mult_0_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_empty|fact"><span>subset_empty</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3162..3167"><span>that</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3602..3607">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.maj_not_lambda|fact"><span class="entity_def" id="DynamicConsensus.round.maj_not_lambda|thm"><span class="entity_def" id="offset_3608..3622">maj_not_lambda</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>If p hears of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span> from a majority, then </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>‹</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>p'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_iff|fact"><span>Int_iff</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3602..3607"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3168..3188"><span>maj_includes_correct</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2663..2665"><span>p5</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2862..2864"><span>p7</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.ho_sets_intersect|fact"><span class="entity_def" id="DynamicConsensus.round.ho_sets_intersect|thm"><span class="entity_def" id="offset_3868..3885">ho_sets_intersect</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>p'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2390..2396"><span>C_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card.empty|fact"><span>card.empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.absorb_iff2|fact"><span>inf.absorb_iff2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_assoc|fact"><span>inf_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.bounded_lattice_bot_class.inf_bot_left|fact"><span>inf_bot_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_nat_zero_code|fact"><span>less_nat_zero_code</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.mult_0_right|fact"><span>mult_0_right</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2431..2433"><span>p2</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2575..2577"><span>p4</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4049..4054">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.maj_is_maj_among_hos|fact"><span class="entity_def" id="DynamicConsensus.round.maj_is_maj_among_hos|thm"><span class="entity_def" id="offset_4055..4075">maj_is_maj_among_hos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>If </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> receives </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span> unanimously from a majority </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="antiquote"><span>}</span></span></span><span> then </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="antiquote"><span>}</span></span></span><span> is 
</span><span>  a majority among the processors that both </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p'</span></span></span><span class="antiquote"><span>}</span></span></span><span> hear of</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>p'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4049..4054"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3608..3622"><span>maj_not_lambda</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4540..4544">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>q</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_iff|fact"><span>Diff_iff</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2961..2963"><span>p8</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4540..4544"><span>that</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4049..4054"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_anti|fact"><span>majority_anti</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_Diff_Int|fact"><span>Diff_Diff_Int</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_empty_left|fact"><span>Int_empty_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_aci|fact"><span>inf_aci</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.faulty_min_among_hos|fact"><span class="entity_def" id="DynamicConsensus.round.faulty_min_among_hos|thm"><span class="entity_def" id="offset_4809..4829">faulty_min_among_hos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>F</span></span></span><span class="antiquote"><span>}</span></span></span><span> is a minority among the intersection of two heard-of sets</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>p'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2390..2396"><span>C_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_Compl|fact"><span>Diff_Compl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_disjoint|fact"><span>Diff_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.absorb_iff2|fact"><span>inf.absorb_iff2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.orderE|fact"><span>inf.orderE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_left_commute|fact"><span>inf_left_commute</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_anti|fact"><span>majority_anti</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2431..2433"><span>p2</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2575..2577"><span>p4</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2787..2789"><span>p6</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2390..2396"><span>C_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_disjoint|fact"><span>Diff_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_subsetI|fact"><span>empty_subsetI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.assoc|fact"><span>inf.assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.commute|fact"><span>inf.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.orderE|fact"><span>inf.orderE</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3868..3885"><span>ho_sets_intersect</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majorities_intersect|fact"><span>majorities_intersect</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Correctness of the commit-adopt algorithm</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5333..5340">context</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.round|locale"><span>round</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5354..5359">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.ca_lemma|fact"><span class="entity_def" id="DynamicConsensus.round.ca_lemma|thm"><span>ca_lemma</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>This is the most important lemma, from which the correctness of the commit-adopt algorithm follows</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="free"><span>m_1</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>M_1</span></span><span> </span><span class="free"><span>M_1'</span></span><span> </span><span class="free"><span>M'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>m_1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bcast</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>processors never send </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M_1</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>q</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m_1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M_1</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span> receives </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m_1</span></span></span><span class="antiquote"><span>}</span></span></span><span> from a strict majority of the processors that it hears of</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M_1'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>q</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m_1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>q</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>M_1'</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>p'</span></span></span><span class="antiquote"><span>}</span></span></span><span> receives </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m_1</span></span></span><span class="antiquote"><span>}</span></span></span><span> more often than </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m_1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.CollectD|fact"><span>CollectD</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>M_1_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3608..3622"><span>maj_not_lambda</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_6074..6080">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M_1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>M_1'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>M_1_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>M_1'_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6074..6080"><span>F'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_iff|fact"><span>Diff_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.IntI|fact"><span>IntI</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>m_1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2397..2402"><span>round_axioms</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.round_def|fact"><span>round_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetI|fact"><span>subsetI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M_1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>M'_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>M_1_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6074..6080"><span>F'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.clarify|method"><span class="operator"><span>clarify</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5333..5340"><span>C_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.DiffI|fact"><span>DiffI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.IntI|fact"><span>IntI</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>m_1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insertE|fact"><span>insertE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2663..2665"><span>p5</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2787..2789"><span>p6</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2961..2963"><span>p8</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.round.p3|fact"><span>round.p3</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2397..2402"><span>round_axioms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.singletonD|fact"><span>singletonD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M_1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M_1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>M_1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6074..6080"><span>F'_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_5354..5359"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.card_maj_gt_card_not_maj|fact"><span>card_maj_gt_card_not_maj</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4809..4829"><span>faulty_min_among_hos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.idem|fact"><span>inf.idem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_assoc|fact"><span>inf_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_le1|fact"><span>inf_le1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_left_commute|fact"><span>inf_left_commute</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.maj_increasing|fact"><span>maj_increasing</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_less_sym_Diff|fact"><span>card_less_sym_Diff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_le_less_trans|fact"><span>order_le_less_trans</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Additional properties</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6941..6948">context</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.round|locale"><span>round</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6962..6967">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.l2|fact"><span class="entity_def" id="DynamicConsensus.round.l2|thm"><span>l2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>There cannot be two different unanimous majorities</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>m'</span></span><span> </span><span class="free"><span>M'</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>p receive </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span> from a strict majority of the processors it hears of</span><span>›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m'</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>p' receive </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m'</span></span></span><span class="antiquote"><span>}</span></span></span><span> from a strict majority of the processors it hears of</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>q</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>M'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4055..4075"><span>maj_is_maj_among_hos</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority|const"><span>majority</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_4055..4075"><span>maj_is_maj_among_hos</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_commute|fact"><span>inf_commute</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3868..3885"><span>ho_sets_intersect</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>q</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>M'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.all_not_in_conv|fact"><span>all_not_in_conv</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majorities_intersect|fact"><span>majorities_intersect</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3608..3622"><span>maj_not_lambda</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_3608..3622"><span>maj_not_lambda</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>HO</span></span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#DynamicConsensus.majority_def|fact"><span>majority_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_iff|fact"><span>Int_iff</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6962..6967"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_iff|fact"><span>empty_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2478..2480"><span>p3</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8199..8204">lemma</span></span></span><span> </span><span class="entity_def" id="DynamicConsensus.round.not_lambda|fact"><span class="entity_def" id="DynamicConsensus.round.not_lambda|thm"><span>not_lambda</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>one cannot receive </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="main"><span class="free"><span>λ</span></span></span></span><span class="antiquote"><span>}</span></span></span><span> from a correct processor</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>q</span></span><span> </span><span class="free"><span>m</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rcvd</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span class="free"><span>λ</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_6941..6948"><span>C_def</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_8199..8204"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_8199..8204"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2663..2665"><span>p5</span></a><span> </span><a class="entity_ref" href="DynamicConsensus.html#offset_2862..2864"><span>p7</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>